var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}function a(t){let e;return i(t,(t=>e=t))(),e}function c(t,e,n){t.$$.on_destroy.push(i(e,n))}function u(t){return null==t?"":t}function s(t,e,n=e){return t.set(n),e}let f,d=!1;function p(t,e,n,o){for(;t<e;){const r=t+(e-t>>1);n(r)<=o?t=r+1:e=r}return t}function h(t,e){d?(!function(t){if(t.hydrate_init)return;t.hydrate_init=!0;const e=t.childNodes,n=new Int32Array(e.length+1),o=new Int32Array(e.length);n[0]=-1;let r=0;for(let t=0;t<e.length;t++){const l=p(1,r+1,(t=>e[n[t]].claim_order),e[t].claim_order)-1;o[t]=n[l]+1;const i=l+1;n[i]=t,r=Math.max(i,r)}const l=[],i=[];let a=e.length-1;for(let t=n[r]+1;0!=t;t=o[t-1]){for(l.push(e[t-1]);a>=t;a--)i.push(e[a]);a--}for(;a>=0;a--)i.push(e[a]);l.reverse(),i.sort(((t,e)=>t.claim_order-e.claim_order));for(let e=0,n=0;e<i.length;e++){for(;n<l.length&&i[e].claim_order>=l[n].claim_order;)n++;const o=n<l.length?l[n]:null;t.insertBefore(i[e],o)}}(t),(void 0===t.actual_end_child||null!==t.actual_end_child&&t.actual_end_child.parentElement!==t)&&(t.actual_end_child=t.firstChild),e!==t.actual_end_child?t.insertBefore(e,t.actual_end_child):t.actual_end_child=e.nextSibling):e.parentNode!==t&&t.appendChild(e)}function m(t,e,n){d&&!n?h(t,e):(e.parentNode!==t||n&&e.nextSibling!==n)&&t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function g(t){return document.createElement(t)}function y(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function $(){return b(" ")}function w(){return b("")}function x(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t){return""===t?null:+t}function k(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function A(t,e){t.value=null==e?"":e}function E(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function D(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function B(t){f=t}function L(){if(!f)throw new Error("Function called outside component initialization");return f}function j(){const t=L();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);o.slice().forEach((e=>{e.call(t,r)}))}}}const N=[],S=[],I=[],O=[],M=Promise.resolve();let R=!1;function U(t){I.push(t)}function z(t){O.push(t)}let F=!1;const P=new Set;function W(){if(!F){F=!0;do{for(let t=0;t<N.length;t+=1){const e=N[t];B(e),T(e.$$)}for(B(null),N.length=0;S.length;)S.pop()();for(let t=0;t<I.length;t+=1){const e=I[t];P.has(e)||(P.add(e),e())}I.length=0}while(N.length);for(;O.length;)O.pop()();R=!1,F=!1,P.clear()}}function T(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const V=new Set;let q;function H(){q={r:0,c:[],p:q}}function K(){q.r||o(q.c),q=q.p}function G(t,e){t&&t.i&&(V.delete(t),t.i(e))}function J(t,e,n,o){if(t&&t.o){if(V.has(t))return;V.add(t),q.c.push((()=>{V.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function Q(t,e){const n=e.token={};function o(t,o,r,l){if(e.token!==n)return;e.resolved=l;let i=e.ctx;void 0!==r&&(i=i.slice(),i[r]=l);const a=t&&(e.current=t)(i);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==o&&t&&(H(),J(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),K())})):e.block.d(1),a.c(),G(a,1),a.m(e.mount(),e.anchor),c=!0),e.block=a,e.blocks&&(e.blocks[o]=a),c&&W()}if((r=t)&&"object"==typeof r&&"function"==typeof r.then){const n=L();if(t.then((t=>{B(n),o(e.then,1,e.value,t),B(null)}),(t=>{if(B(n),o(e.catch,2,e.error,t),B(null),!e.hasCatch)throw t})),e.current!==e.pending)return o(e.pending,0),!0}else{if(e.current!==e.then)return o(e.then,1,e.value,t),!0;e.resolved=t}var r}function X(t,e,n){const o=e.slice(),{resolved:r}=t;t.current===t.then&&(o[t.value]=r),t.current===t.catch&&(o[t.error]=r),t.block.p(o,n)}function Y(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function Z(t){t&&t.c()}function tt(t,n,l,i){const{fragment:a,on_mount:c,on_destroy:u,after_update:s}=t.$$;a&&a.m(n,l),i||U((()=>{const n=c.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]})),s.forEach(U)}function et(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e){-1===t.$$.dirty[0]&&(N.push(t),R||(R=!0,M.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ot(e,r,l,i,a,c,u=[-1]){const s=f;B(e);const p=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:r.context||[]),callbacks:n(),dirty:u,skip_bound:!1};let h=!1;if(p.ctx=l?l(e,r.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&nt(e,t)),n})):[],p.update(),h=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),r.target){if(r.hydrate){d=!0;const t=function(t){return Array.from(t.childNodes)}(r.target);p.fragment&&p.fragment.l(t),t.forEach(v)}else p.fragment&&p.fragment.c();r.intro&&G(e.$$.fragment),tt(e,r.target,r.anchor,r.customElement),d=!1,W()}B(s)}class rt{$destroy(){et(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const lt=[];function it(e,n=t){let o;const r=[];function i(t){if(l(e,t)&&(e=t,o)){const t=!lt.length;for(let t=0;t<r.length;t+=1){const n=r[t];n[1](),lt.push(n,e)}if(t){for(let t=0;t<lt.length;t+=2)lt[t][0](lt[t+1]);lt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(l,a=t){const c=[l,a];return r.push(c),1===r.length&&(o=n(i)||t),l(e),()=>{const t=r.indexOf(c);-1!==t&&r.splice(t,1),0===r.length&&(o(),o=null)}}}}var at;!function(t){t[t.filePicker=0]="filePicker",t[t.library=1]="library",t[t.extender=2]="extender"}(at||(at={}));let ct=it(at.filePicker),ut=it(new ArrayBuffer(0)),st=it(0),ft=it(0),dt=it(0),pt=it(new AudioBuffer({length:1,sampleRate:8e4})),ht=it(""),mt=it(!1);function vt(t){let e,n,o,r;function l(t,e){return"string"==typeof t[8][4]?yt:gt}let i=l(t),a=i(t);return{c(){e=y("svg"),n=y("g"),o=y("g"),a.c(),_(o,"transform",t[10]),_(n,"transform","translate(256 256)"),_(e,"id",t[1]),_(e,"class",t[0]),_(e,"style",t[9]),_(e,"viewBox",r=`0 0 ${t[8][0]} ${t[8][1]}`),_(e,"aria-hidden","true"),_(e,"role","img"),_(e,"xmlns","http://www.w3.org/2000/svg")},m(t,r){m(t,e,r),h(e,n),h(n,o),a.m(o,null)},p(t,n){i===(i=l(t))&&a?a.p(t,n):(a.d(1),a=i(t),a&&(a.c(),a.m(o,null))),1024&n&&_(o,"transform",t[10]),2&n&&_(e,"id",t[1]),1&n&&_(e,"class",t[0]),512&n&&_(e,"style",t[9]),256&n&&r!==(r=`0 0 ${t[8][0]} ${t[8][1]}`)&&_(e,"viewBox",r)},d(t){t&&v(e),a.d()}}}function gt(t){let e,n,o,r,l,i,a,c;return{c(){e=y("path"),l=y("path"),_(e,"d",n=t[8][4][0]),_(e,"fill",o=t[4]||t[2]||"currentColor"),_(e,"fill-opacity",r=0!=t[7]?t[5]:t[6]),_(e,"transform","translate(-256 -256)"),_(l,"d",i=t[8][4][1]),_(l,"fill",a=t[3]||t[2]||"currentColor"),_(l,"fill-opacity",c=0!=t[7]?t[6]:t[5]),_(l,"transform","translate(-256 -256)")},m(t,n){m(t,e,n),m(t,l,n)},p(t,u){256&u&&n!==(n=t[8][4][0])&&_(e,"d",n),20&u&&o!==(o=t[4]||t[2]||"currentColor")&&_(e,"fill",o),224&u&&r!==(r=0!=t[7]?t[5]:t[6])&&_(e,"fill-opacity",r),256&u&&i!==(i=t[8][4][1])&&_(l,"d",i),12&u&&a!==(a=t[3]||t[2]||"currentColor")&&_(l,"fill",a),224&u&&c!==(c=0!=t[7]?t[6]:t[5])&&_(l,"fill-opacity",c)},d(t){t&&v(e),t&&v(l)}}}function yt(t){let e,n,o;return{c(){e=y("path"),_(e,"d",n=t[8][4]),_(e,"fill",o=t[2]||t[3]||"currentColor"),_(e,"transform","translate(-256 -256)")},m(t,n){m(t,e,n)},p(t,r){256&r&&n!==(n=t[8][4])&&_(e,"d",n),12&r&&o!==(o=t[2]||t[3]||"currentColor")&&_(e,"fill",o)},d(t){t&&v(e)}}}function bt(e){let n,o=e[8][4]&&vt(e);return{c(){o&&o.c(),n=w()},m(t,e){o&&o.m(t,e),m(t,n,e)},p(t,[e]){t[8][4]?o?o.p(t,e):(o=vt(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&v(n)}}}function $t(t,e,n){let o,r,l,{class:i=""}=e,{id:a=""}=e,{style:c=""}=e,{icon:u}=e,{fw:s=!1}=e,{flip:f=!1}=e,{pull:d=""}=e,{rotate:p=""}=e,{size:h=""}=e,{color:m=""}=e,{primaryColor:v=""}=e,{secondaryColor:g=""}=e,{primaryOpacity:y=1}=e,{secondaryOpacity:b=.4}=e,{swapOpacity:$=!1}=e;return t.$$set=t=>{"class"in t&&n(0,i=t.class),"id"in t&&n(1,a=t.id),"style"in t&&n(11,c=t.style),"icon"in t&&n(12,u=t.icon),"fw"in t&&n(13,s=t.fw),"flip"in t&&n(14,f=t.flip),"pull"in t&&n(15,d=t.pull),"rotate"in t&&n(16,p=t.rotate),"size"in t&&n(17,h=t.size),"color"in t&&n(2,m=t.color),"primaryColor"in t&&n(3,v=t.primaryColor),"secondaryColor"in t&&n(4,g=t.secondaryColor),"primaryOpacity"in t&&n(5,y=t.primaryOpacity),"secondaryOpacity"in t&&n(6,b=t.secondaryOpacity),"swapOpacity"in t&&n(7,$=t.swapOpacity)},t.$$.update=()=>{if(4096&t.$$.dirty&&n(8,o=u&&u.icon||[0,0,"",[],""]),174080&t.$$.dirty){let t,e;const o="1em";let l,i,a,u="-.125em";const f="visible";s&&(a="center",e="1.25em"),d&&(t=d),h&&("lg"==h?(i="1.33333em",l=".75em",u="-.225em"):i="xs"==h?".75em":"sm"==h?".875em":h.replace("x","em"));const p={float:t,width:e,height:o,"line-height":l,"font-size":i,"text-align":a,"vertical-align":u,overflow:f};let m="";for(const t in p)p[t]&&(m+=`${t}:${p[t]};`);n(9,r=m+c)}if(81920&t.$$.dirty){let t="";if(f){let e=1,n=1;"horizontal"==f?e=-1:"vertical"==f?n=-1:e=n=-1,t+=` scale(${e} ${n})`}p&&(t+=` rotate(${p} 0 0)`),n(10,l=t)}},[i,a,m,v,g,y,b,$,o,r,l,c,u,s,f,d,p,h]}class wt extends rt{constructor(t){super(),ot(this,t,$t,bt,l,{class:0,id:1,style:11,icon:12,fw:13,flip:14,pull:15,rotate:16,size:17,color:2,primaryColor:3,secondaryColor:4,primaryOpacity:5,secondaryOpacity:6,swapOpacity:7})}}
/*!
     * Font Awesome Free 5.15.3 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     */var xt={prefix:"fas",iconName:"check",icon:[512,512,[],"f00c","M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"]},_t={prefix:"fas",iconName:"pause",icon:[448,512,[],"f04c","M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"]},Ct={prefix:"fas",iconName:"play",icon:[448,512,[],"f04b","M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"]},kt={prefix:"fas",iconName:"trash-alt",icon:[448,512,[],"f2ed","M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"]};let At,Et;const Dt=new WeakMap,Bt=new WeakMap,Lt=new WeakMap,jt=new WeakMap,Nt=new WeakMap;let St={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Bt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Lt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function It(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Et||(Et=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Rt(this),e),Mt(Dt.get(this))}:function(...e){return Mt(t.apply(Rt(this),e))}:function(e,...n){const o=t.call(Rt(this),e,...n);return Lt.set(o,e.sort?e.sort():[e]),Mt(o)}}function Ot(t){return"function"==typeof t?It(t):(t instanceof IDBTransaction&&function(t){if(Bt.has(t))return;const e=new Promise(((e,n)=>{const o=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",l),t.removeEventListener("abort",l)},r=()=>{e(),o()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",r),t.addEventListener("error",l),t.addEventListener("abort",l)}));Bt.set(t,e)}(t),e=t,(At||(At=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,St):t);var e}function Mt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const o=()=>{t.removeEventListener("success",r),t.removeEventListener("error",l)},r=()=>{e(Mt(t.result)),o()},l=()=>{n(t.error),o()};t.addEventListener("success",r),t.addEventListener("error",l)}));return e.then((e=>{e instanceof IDBCursor&&Dt.set(e,t)})).catch((()=>{})),Nt.set(e,t),e}(t);if(jt.has(t))return jt.get(t);const e=Ot(t);return e!==t&&(jt.set(t,e),Nt.set(e,t)),e}const Rt=t=>Nt.get(t);const Ut=["get","getKey","getAll","getAllKeys","count"],zt=["put","add","delete","clear"],Ft=new Map;function Pt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ft.get(e))return Ft.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,r=zt.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!r&&!Ut.includes(n))return;const l=async function(t,...e){const l=this.transaction(t,r?"readwrite":"readonly");let i=l.store;return o&&(i=i.index(e.shift())),(await Promise.all([i[n](...e),r&&l.done]))[0]};return Ft.set(e,l),l}St=(t=>({...t,get:(e,n,o)=>Pt(e,n)||t.get(e,n,o),has:(e,n)=>!!Pt(e,n)||t.has(e,n)}))(St);let Wt=function(t,e,{blocked:n,upgrade:o,blocking:r,terminated:l}={}){const i=indexedDB.open(t,e),a=Mt(i);return o&&i.addEventListener("upgradeneeded",(t=>{o(Mt(i.result),t.oldVersion,t.newVersion,Mt(i.transaction))})),n&&i.addEventListener("blocked",(()=>n())),a.then((t=>{l&&t.addEventListener("close",(()=>l())),r&&t.addEventListener("versionchange",(()=>r()))})).catch((()=>{})),a}("audio-extender",1,{upgrade(t,e,n,o){switch(e){case 0:t.createObjectStore("library",{keyPath:"name"})}}});function Tt(e){let n;return{c(){n=g("button"),n.textContent="Library is not available",n.disabled=!0,_(n,"class","svelte-1owbxbf")},m(t,e){m(t,n,e)},p:t,d(t){t&&v(n)}}}function Vt(t){let e;let n=function(t,e){return t[15]?qt:Ht}(t)(t);return{c(){n.c(),e=w()},m(t,o){n.m(t,o),m(t,e,o)},p(t,e){n.p(t,e)},d(t){n.d(t),t&&v(e)}}}function qt(e){let n;return{c(){n=g("button"),n.textContent="Library is empty",n.disabled=!0,_(n,"class","svelte-1owbxbf")},m(t,e){m(t,n,e)},p:t,d(t){t&&v(n)}}}function Ht(e){let n,o,r;return{c(){n=g("button"),n.textContent="Choose from library",_(n,"class","svelte-1owbxbf")},m(t,l){m(t,n,l),o||(r=x(n,"click",e[10]),o=!0)},p:t,d(t){t&&v(n),o=!1,r()}}}function Kt(e){let n;return{c(){n=g("button"),n.textContent="Waiting for library...",n.disabled=!0,_(n,"class","svelte-1owbxbf")},m(t,e){m(t,n,e)},p:t,d(t){t&&v(n)}}}function Gt(t){let e,n,r,l,i,a,c,u,s,f,d,p,y,b,w,C,k,E;p=new wt({props:{icon:xt}});let D={ctx:t,current:null,token:null,hasCatch:!0,pending:Kt,then:Vt,catch:Tt,value:15};return Q(t[5](),D),{c(){e=g("p"),e.textContent="Choose an audio file to extend",n=$(),r=g("div"),l=g("input"),i=$(),a=g("span"),a.textContent="or",c=$(),u=g("div"),s=g("input"),f=$(),d=g("button"),Z(p.$$.fragment),y=$(),b=g("span"),b.textContent="or",w=$(),D.block.c(),_(l,"type","file"),_(l,"accept","audio/*"),_(l,"class","svelte-1owbxbf"),_(a,"class","or svelte-1owbxbf"),_(s,"type","url"),_(s,"placeholder","Enter a URL"),_(s,"class","svelte-1owbxbf"),_(d,"class","svelte-1owbxbf"),_(u,"class","url-input-container svelte-1owbxbf"),_(b,"class","or svelte-1owbxbf"),_(r,"class","input-container svelte-1owbxbf")},m(o,v){m(o,e,v),m(o,n,v),m(o,r,v),h(r,l),t[6](l),h(r,i),h(r,a),h(r,c),h(r,u),h(u,s),A(s,t[1]),h(u,f),h(u,d),tt(p,d,null),h(r,y),h(r,b),h(r,w),D.block.m(r,D.anchor=null),D.mount=()=>r,D.anchor=null,C=!0,k||(E=[x(l,"input",t[7]),x(s,"input",t[8]),x(d,"click",t[9])],k=!0)},p(e,[n]){t=e,2&n&&A(s,t[1]),X(D,t,n)},i(t){C||(G(p.$$.fragment,t),C=!0)},o(t){J(p.$$.fragment,t),C=!1},d(l){l&&v(e),l&&v(n),l&&v(r),t[6](null),et(p),D.block.d(),D.token=null,D=null,k=!1,o(E)}}}function Jt(t,e,n){let o,r,l;c(t,ut,(t=>n(11,o=t))),c(t,ht,(t=>n(12,r=t))),c(t,ct,(t=>n(3,l=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function i(t){try{c(o.next(t))}catch(t){l(t)}}function a(t){try{c(o.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((o=o.apply(t,e||[])).next())}))};let a,u;var f;function d(t){return i(this,void 0,void 0,(function*(){if(t===f.file)s(ut,o=yield new Promise((t=>{let e=new FileReader;e.onload=e=>{let n=e.target.result;"object"==typeof n&&t(n)},e.onerror=t=>{console.error(t.target.error),alert("Could not read the file")},s(ht,r=a.files[0].name,r),e.readAsArrayBuffer(a.files[0])})),o);else try{let t=new URL(u).pathname.split("/");s(ht,r=decodeURIComponent(t[t.length-1]||t[t.length-2]),r);let e=yield fetch(u);s(ut,o=yield e.arrayBuffer(),o)}catch(t){console.error(t),alert("Could not read the file, because the server does not allow it. Please download and upload it manually.")}0!==o.byteLength&&s(ct,l=at.extender,l)}))}!function(t){t[t.file=0]="file",t[t.url=1]="url"}(f||(f={}));return[a,u,f,l,d,function(){return i(this,void 0,void 0,(function*(){let t=yield Wt;return 0===(yield t.getAllKeys("library",null,1)).length}))},function(t){S[t?"unshift":"push"]((()=>{a=t,n(0,a)}))},()=>d(f.file),function(){u=this.value,n(1,u)},()=>d(f.url),()=>s(ct,l=at.library,l)]}class Qt extends rt{constructor(t){super(),ot(this,t,Jt,Gt,l,{})}}var Xt;function Yt(t,e=Xt.round){let n=Math.floor(t/3600),o=Math.floor(t/60%60),r=t%60;return e===Xt.round?r=Math.floor(r):e===Xt.milli&&(r=Math.round(1e3*r)/1e3),n>0?`${n}:${Zt(o)}:${Zt(r)}`:`${o}:${Zt(r)}`}function Zt(t){return t<10?"0"+t:String(t)}function te(e){let n,o;return n=new wt({props:{icon:Ct}}),{c(){Z(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(G(n.$$.fragment,t),o=!0)},o(t){J(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ee(e){let n,o;return n=new wt({props:{icon:_t}}),{c(){Z(n.$$.fragment)},m(t,e){tt(n,t,e),o=!0},p:t,i(t){o||(G(n.$$.fragment,t),o=!0)},o(t){J(n.$$.fragment,t),o=!1},d(t){et(n,t)}}}function ne(t){let e,n,r,l,i,a,c,u,s,f,d,p,y,w,C,E,D=Yt(t[3])+"",B=Yt(t[4])+"";const L=[ee,te],j=[];function N(t,e){return t[2]?0:1}return r=N(t),l=j[r]=L[r](t),{c(){e=g("div"),n=g("span"),l.c(),i=$(),a=g("span"),c=b(D),u=$(),s=g("input"),d=$(),p=g("span"),y=b(B),_(n,"class","play-button svelte-7mk9qe"),_(a,"class","current time svelte-7mk9qe"),_(s,"type","range"),_(s,"max",t[4]),_(s,"step","any"),_(s,"style",f=`\n            --loop-start: ${t[0]/t[4]*100}%;\n            --loop-end: ${t[1]/t[4]*100}%;\n        `),_(s,"class","svelte-7mk9qe"),_(p,"class","end time svelte-7mk9qe"),_(e,"class","player-container svelte-7mk9qe")},m(o,l){m(o,e,l),h(e,n),j[r].m(n,null),h(e,i),h(e,a),h(a,c),h(e,u),h(e,s),A(s,t[3]),h(e,d),h(e,p),h(p,y),w=!0,C||(E=[x(n,"click",t[5]),x(s,"change",t[10]),x(s,"input",t[10]),x(s,"mousedown",t[6]),x(s,"mouseup",t[7]),x(s,"touchstart",t[6],{passive:!0}),x(s,"touchend",t[7],{passive:!0})],C=!0)},p(t,[e]){let o=r;r=N(t),r===o?j[r].p(t,e):(H(),J(j[o],1,1,(()=>{j[o]=null})),K(),l=j[r],l?l.p(t,e):(l=j[r]=L[r](t),l.c()),G(l,1),l.m(n,null)),(!w||8&e)&&D!==(D=Yt(t[3])+"")&&k(c,D),(!w||16&e)&&_(s,"max",t[4]),(!w||19&e&&f!==(f=`\n            --loop-start: ${t[0]/t[4]*100}%;\n            --loop-end: ${t[1]/t[4]*100}%;\n        `))&&_(s,"style",f),8&e&&A(s,t[3]),(!w||16&e)&&B!==(B=Yt(t[4])+"")&&k(y,B)},i(t){w||(G(l),w=!0)},o(t){J(l),w=!1},d(t){t&&v(e),j[r].d(),C=!1,o(E)}}}function oe(t,e,n){let o,r,l,i,a;c(t,ft,(t=>n(0,o=t))),c(t,dt,(t=>n(1,r=t))),c(t,pt,(t=>n(15,l=t))),c(t,ut,(t=>n(16,i=t))),c(t,st,(t=>n(4,a=t)));var u=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function i(t){try{c(o.next(t))}catch(t){l(t)}}function a(t){try{c(o.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((o=o.apply(t,e||[])).next())}))};let f,d=new AudioContext;function p(t,e,o){n(3,g=e),m&&f.stop(),n(9,f=d.createBufferSource()),f.connect(d.destination),n(9,f.buffer=l,f),f.start(t,e,o),"suspended"===d.state&&d.resume(),m=!0,n(2,h=!0),v=Date.now()/1e3-g,b()}let h=!1,m=!1;d.onstatechange=()=>{m&&"running"===d.state?(n(2,h=!0),v=Date.now()/1e3-g,b()):n(2,h=!1)};let v,g=0,y=!1;function b(){g>=r&&(v+=r-o),y||n(3,g=Date.now()/1e3-v),h&&requestAnimationFrame(b)}let $=j();return u(void 0,void 0,void 0,(function*(){try{let t=new ArrayBuffer(i.byteLength);new Uint8Array(t).set(new Uint8Array(i)),n(9,f=d.createBufferSource()),s(pt,l=yield d.decodeAudioData(t),l),n(9,f.buffer=l,f),s(st,a=f.buffer.duration,a),$("duration")}catch(t){console.error(t),alert("Could not play the audio file")}})),t.$$.update=()=>{515&t.$$.dirty&&f&&(n(9,f.loop=!0,f),n(9,f.loopStart=o,f),n(9,f.loopEnd=r,f))},[o,r,h,g,a,function(){h?d.suspend():m?d.resume():p(0,g)},function(){y=!0},function(){y=!1,v=Date.now()/1e3-g,m&&f.stop(),h?p(0,g):m=!1},p,f,function(){g=C(this.value),n(3,g)}]}!function(t){t[t.round=0]="round",t[t.milli=1]="milli",t[t.noRounding=2]="noRounding"}(Xt||(Xt={}));class re extends rt{constructor(t){super(),ot(this,t,oe,ne,l,{start:8})}get start(){return this.$$.ctx[8]}}function le(e){let n,r,l,i,a,c,s,f,d,p,y,b,w,C,k,E,D,B,L,j,N;return{c(){n=g("div"),r=g("button"),r.textContent="-1ms",l=$(),i=g("button"),i.textContent="-10ms",a=$(),c=g("button"),c.textContent="-0.1s",s=$(),f=g("button"),f.textContent="-1s",d=$(),p=g("input"),b=$(),w=g("button"),w.textContent="+1ms",C=$(),k=g("button"),k.textContent="+10ms",E=$(),D=g("button"),D.textContent="+0.1s",B=$(),L=g("button"),L.textContent="+1s",_(r,"class","row1 col1 svelte-1jd5ba9"),_(i,"class","row1 col2 svelte-1jd5ba9"),_(c,"class","row2 col1 svelte-1jd5ba9"),_(f,"class","row2 col2 svelte-1jd5ba9"),_(p,"class",y=u(e[1]?"":"invalid")+" svelte-1jd5ba9"),_(p,"type","text"),_(w,"class","row1 col3 svelte-1jd5ba9"),_(k,"class","row1 col4 svelte-1jd5ba9"),_(D,"class","row2 col3 svelte-1jd5ba9"),_(L,"class","row2 col4 svelte-1jd5ba9"),_(n,"class","input-container svelte-1jd5ba9")},m(t,o){m(t,n,o),h(n,r),h(n,l),h(n,i),h(n,a),h(n,c),h(n,s),h(n,f),h(n,d),h(n,p),A(p,e[0]),h(n,b),h(n,w),h(n,C),h(n,k),h(n,E),h(n,D),h(n,B),h(n,L),j||(N=[x(r,"click",e[6]),x(i,"click",e[7]),x(c,"click",e[8]),x(f,"click",e[9]),x(p,"input",e[10]),x(w,"click",e[11]),x(k,"click",e[12]),x(D,"click",e[13]),x(L,"click",e[14])],j=!0)},p(t,[e]){2&e&&y!==(y=u(t[1]?"":"invalid")+" svelte-1jd5ba9")&&_(p,"class",y),1&e&&p.value!==t[0]&&A(p,t[0])},i:t,o:t,d(t){t&&v(n),j=!1,o(N)}}}function ie(t,e,n){let o,{value:r=0}=e,{max:l=1/0}=e,i=Yt(r);function a(t){n(3,r+t>0?r+=t:r=0),n(0,i=Yt(r,Xt.milli))}return t.$$set=t=>{"value"in t&&n(3,r=t.value),"max"in t&&n(4,l=t.max)},t.$$.update=()=>{if(19&t.$$.dirty){let t=function(t){let e=t.split(":");return 1===e.length?Number(e[0]):2===e.length?60*Number(e[0])+Number(e[1]):3===e.length?3600*Number(e[0])+60*Number(e[1])+Number(e[2]):NaN}(i);n(1,o=t<=l&&t>=0&&!isNaN(t)),o&&n(3,r=t)}},[i,o,a,r,l,function(t,e){n(0,i=Yt(t,e))},()=>a(-.001),()=>a(-.01),()=>a(-.1),()=>a(-1),function(){i=this.value,n(0,i)},()=>a(.001),()=>a(.01),()=>a(.1),()=>a(1)]}class ae extends rt{constructor(t){super(),ot(this,t,ie,le,l,{value:3,max:4,setValue:5})}get setValue(){return this.$$.ctx[5]}}function ce(e){let n,o,r;return U(e[7]),{c(){n=g("canvas"),_(n,"width","0"),_(n,"height","151"),_(n,"class","svelte-m5vup3")},m(t,l){m(t,n,l),e[8](n),o||(r=x(window,"resize",e[7]),o=!0)},p:t,i:t,o:t,d(t){t&&v(n),e[8](null),o=!1,r()}}}function ue(t,e,n){let o,r,l;c(t,pt,(t=>n(4,o=t))),c(t,ft,(t=>n(5,r=t))),c(t,dt,(t=>n(6,l=t)));let i,a,u,s,{graphDomain:f}=e;function d(t){let e;e="sample"===f?s:f*o.sampleRate;let n=new Float32Array(e);o.copyFromChannel(n,0,o.sampleRate*t);let r=new Uint8Array(e);for(let t=0;t<r.length;t++)r[t]=Math.round(75*(1-n[t]));return r}var p;return p=()=>{a=i.getContext("2d")},L().$$.on_mount.push(p),t.$$set=t=>{"graphDomain"in t&&n(2,f=t.graphDomain)},t.$$.update=()=>{1&t.$$.dirty&&n(3,s=.9*u),124&t.$$.dirty&&o.length>1&&(n(1,i.width=s,i),function(){let t=d(r),e=d(l);a.fillStyle="white",a.fillRect(0,0,s,256),a.beginPath(),a.lineWidth=2,a.strokeStyle="lime",a.moveTo(0,t[0]);for(let e=1;e<t.length;e++){let n=e;"sample"!==f&&(n=e/t.length*s),a.lineTo(n,t[e])}a.stroke(),a.beginPath(),a.lineWidth=2,a.strokeStyle="rgba(0, 0, 255, 0.5)",a.moveTo(0,e[0]);for(let t=1;t<e.length;t++){let n=t;"sample"!==f&&(n=t/e.length*s),a.lineTo(n,e[t])}a.stroke()}())},[u,i,f,s,o,r,l,function(){n(0,u=window.innerWidth)},function(t){S[t?"unshift":"push"]((()=>{i=t,n(1,i),n(4,o),n(5,r),n(6,l),n(3,s),n(2,f),n(0,u)}))}]}class se extends rt{constructor(t){super(),ot(this,t,ue,ce,l,{graphDomain:2})}}var fe=function(t,e){e=e||{};var n,o=t.numberOfChannels,r=t.sampleRate,l=e.float32?3:1,i=3===l?32:16;n=2===o?function(t,e){var n=t.length+e.length,o=new Float32Array(n),r=0,l=0;for(;r<n;)o[r++]=t[l],o[r++]=e[l],l++;return o}(t.getChannelData(0),t.getChannelData(1)):t.getChannelData(0);return function(t,e,n,o,r){var l=r/8,i=o*l,a=new ArrayBuffer(44+t.length*l),c=new DataView(a);de(c,0,"RIFF"),c.setUint32(4,36+t.length*l,!0),de(c,8,"WAVE"),de(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,e,!0),c.setUint16(22,o,!0),c.setUint32(24,n,!0),c.setUint32(28,n*i,!0),c.setUint16(32,i,!0),c.setUint16(34,r,!0),de(c,36,"data"),c.setUint32(40,t.length*l,!0),1===e?function(t,e,n){for(var o=0;o<n.length;o++,e+=2){var r=Math.max(-1,Math.min(1,n[o]));t.setInt16(e,r<0?32768*r:32767*r,!0)}}(c,44,t):function(t,e,n){for(var o=0;o<n.length;o++,e+=4)t.setFloat32(e,n[o],!0)}(c,44,t);return a}(n,l,r,o,i)};function de(t,e,n){for(var o=0;o<n.length;o++)t.setUint8(e+o,n.charCodeAt(o))}function pe(e){let n,r,l,i,a,c,u,s,f,d,p,y,w,D,B,L,j="duration"===e[0]?"min":"";return{c(){n=g("div"),r=g("h2"),r.textContent="Download",l=$(),i=g("select"),a=g("option"),a.textContent="Amount of loops",c=g("option"),c.textContent="Minimal duration",u=$(),s=g("input"),f=$(),d=b(j),p=$(),y=g("p"),y.textContent="Note: these files can get quite big",w=$(),D=g("button"),D.textContent="Download",a.__value="loops",a.value=a.__value,c.__value="duration",c.value=c.__value,void 0===e[0]&&U((()=>e[7].call(i))),_(s,"type","number"),_(s,"class","svelte-11znw9r"),_(n,"class","download-container svelte-11znw9r")},m(t,o){m(t,n,o),h(n,r),h(n,l),h(n,i),h(i,a),h(i,c),E(i,e[0]),h(n,u),h(n,s),A(s,e[1]),h(n,f),h(n,d),h(n,p),h(n,y),h(n,w),h(n,D),B||(L=[x(i,"change",e[7]),x(s,"input",e[8]),x(D,"click",e[2])],B=!0)},p(t,[e]){1&e&&E(i,t[0]),2&e&&C(s.value)!==t[1]&&A(s,t[1]),1&e&&j!==(j="duration"===t[0]?"min":"")&&k(d,j)},i:t,o:t,d(t){t&&v(n),B=!1,o(L)}}}function he(t,e,n){let o,r,l,i,a;c(t,ft,(t=>n(3,o=t))),c(t,dt,(t=>n(4,r=t))),c(t,st,(t=>n(5,l=t))),c(t,pt,(t=>n(6,i=t)));let u,s,f,d,p=2;function h(t,e){let n=new Float32Array(u*d);i.copyFromChannel(n,t);let l=new Float32Array(s*d);i.copyFromChannel(l,t,o*d);let a=new Float32Array(f*d);i.copyFromChannel(a,t,r*d);let c=new Float32Array(d*(u+s*e+f));c.set(n);for(let t=0;t<e;t++)c.set(l,(u+s*t)*d);return c.set(a,(u+s*e)*d),c}return t.$$.update=()=>{120&t.$$.dirty&&(u=o,s=r-o,f=l-r,d=i.sampleRate)},[a,p,function(){let t;t="loops"===a?p:Math.ceil((p-(u+f))/s);let e=new AudioBuffer({length:d*(u+s*t+f),sampleRate:i.sampleRate,numberOfChannels:i.numberOfChannels});for(let n=0;n<i.numberOfChannels;n++){let o=h(n,t);e.copyToChannel(o,n)}let n=fe(e),o=new Uint8Array(n),r=new Blob([o],{type:"audio/vnd.wav"}),l=URL.createObjectURL(r),c=document.createElement("a");c.href=l,c.download="extended.wav",c.click(),URL.revokeObjectURL(l)},o,r,l,i,function(){a=D(this),n(0,a)},function(){p=C(this.value),n(1,p)}]}class me extends rt{constructor(t){super(),ot(this,t,he,pe,l,{})}}function ve(t,e,n){let o=0;for(let r=0;r<t.length;r++)o+=Math.pow(t[r]-e[r+n],2);return o}function ge(t){let e;return{c(){e=b("Add to library")},m(t,n){m(t,e,n)},d(t){t&&v(e)}}}function ye(t){let e;return{c(){e=b("Update in library")},m(t,n){m(t,e,n)},d(t){t&&v(e)}}}function be(t){let e,n,l,i,a,c,u,s,f,d,p,y,b,w,C,k,A,D,B,L,j,N,I,O,M,R,F,P,W,T,V,q,H,K,Q,X,nt,ot,rt,lt;function it(e){t[8](e)}let at={};function ct(e){t[9](e)}void 0!==t[1]&&(at.start=t[1]),e=new re({props:at}),S.push((()=>Y(e,"start",it))),e.$on("duration",(function(){r(t[0](t[5]?t[4]:t[6],Xt.round))&&t[0](t[5]?t[4]:t[6],Xt.round).apply(this,arguments)}));let ut={max:t[4]};function st(e){t[10](e)}function ft(e){t[11](e)}void 0!==t[3]&&(ut.value=t[3]),s=new ae({props:ut}),S.push((()=>Y(s,"value",ct)));let dt={max:t[6]};function pt(t,e){return t[5]?ye:ge}void 0!==t[4]&&(dt.value=t[4]),void 0!==t[0]&&(dt.setValue=t[0]),w=new ae({props:dt}),S.push((()=>Y(w,"value",st))),S.push((()=>Y(w,"setValue",ft))),B=new se({props:{graphDomain:t[2]}});let ht=pt(t),mt=ht(t);return nt=new me({}),{c(){Z(e.$$.fragment),l=$(),i=g("div"),a=g("div"),c=g("h2"),c.textContent="Loop from",u=$(),Z(s.$$.fragment),d=$(),p=g("div"),y=g("h2"),y.textContent="until",b=$(),Z(w.$$.fragment),A=$(),D=g("div"),Z(B.$$.fragment),L=$(),j=g("select"),N=g("option"),N.textContent="Pixel = sample",I=g("option"),I.textContent="Width = 50ms",O=g("option"),O.textContent="Width = 0.1s",M=g("option"),M.textContent="Width = 0.5s",R=g("option"),R.textContent="Width = 1s",F=g("option"),F.textContent="Width = 5s",P=$(),W=g("button"),W.textContent="Adjust end time",T=$(),V=g("button"),V.textContent="Test",q=$(),H=g("button"),mt.c(),K=$(),Q=g("br"),X=$(),Z(nt.$$.fragment),_(a,"class","time-input svelte-1o22igu"),_(p,"class","time-input svelte-1o22igu"),_(i,"class","input-container svelte-1o22igu"),N.__value="sample",N.value=N.__value,I.__value="0.05",I.value=I.__value,O.__value="0.1",O.value=O.__value,M.__value="0.5",M.value=M.__value,R.__value="1",R.value=R.__value,F.__value="5",F.value=F.__value,void 0===t[2]&&U((()=>t[12].call(j)))},m(n,o){tt(e,n,o),m(n,l,o),m(n,i,o),h(i,a),h(a,c),h(a,u),tt(s,a,null),h(i,d),h(i,p),h(p,y),h(p,b),tt(w,p,null),m(n,A,o),m(n,D,o),tt(B,D,null),m(n,L,o),m(n,j,o),h(j,N),h(j,I),h(j,O),h(j,M),h(j,R),h(j,F),E(j,t[2]),m(n,P,o),m(n,W,o),m(n,T,o),m(n,V,o),m(n,q,o),m(n,H,o),mt.m(H,null),m(n,K,o),m(n,Q,o),m(n,X,o),tt(nt,n,o),ot=!0,rt||(lt=[x(j,"change",t[12]),x(W,"click",t[13]),x(V,"click",t[14]),x(H,"click",t[7])],rt=!0)},p(o,[r]){t=o;const l={};!n&&2&r&&(n=!0,l.start=t[1],z((()=>n=!1))),e.$set(l);const i={};16&r&&(i.max=t[4]),!f&&8&r&&(f=!0,i.value=t[3],z((()=>f=!1))),s.$set(i);const a={};64&r&&(a.max=t[6]),!C&&16&r&&(C=!0,a.value=t[4],z((()=>C=!1))),!k&&1&r&&(k=!0,a.setValue=t[0],z((()=>k=!1))),w.$set(a);const c={};4&r&&(c.graphDomain=t[2]),B.$set(c),4&r&&E(j,t[2]),ht!==(ht=pt(t))&&(mt.d(1),mt=ht(t),mt&&(mt.c(),mt.m(H,null)))},i(t){ot||(G(e.$$.fragment,t),G(s.$$.fragment,t),G(w.$$.fragment,t),G(B.$$.fragment,t),G(nt.$$.fragment,t),ot=!0)},o(t){J(e.$$.fragment,t),J(s.$$.fragment,t),J(w.$$.fragment,t),J(B.$$.fragment,t),J(nt.$$.fragment,t),ot=!1},d(t){et(e,t),t&&v(l),t&&v(i),et(s),et(w),t&&v(A),t&&v(D),et(B),t&&v(L),t&&v(j),t&&v(P),t&&v(W),t&&v(T),t&&v(V),t&&v(q),t&&v(H),mt.d(),t&&v(K),t&&v(Q),t&&v(X),et(nt,t),rt=!1,o(lt)}}}function $e(t,e,n){let o,r,l,i,u,f;c(t,ht,(t=>n(15,o=t))),c(t,ft,(t=>n(3,r=t))),c(t,dt,(t=>n(4,l=t))),c(t,ut,(t=>n(16,i=t))),c(t,mt,(t=>n(5,u=t))),c(t,st,(t=>n(6,f=t)));var d=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function i(t){try{c(o.next(t))}catch(t){l(t)}}function a(t){try{c(o.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((o=o.apply(t,e||[])).next())}))};let p,h,m;return[p,h,m,r,l,u,f,function(){return d(this,void 0,void 0,(function*(){(yield Wt).put("library",{name:o,loopStart:r,loopEnd:l,file:i}),s(mt,u=!0,u)}))},function(t){h=t,n(1,h)},function(t){r=t,ft.set(r)},function(t){l=t,dt.set(l)},function(t){p=t,n(0,p)},function(){m=D(this),n(2,m)},()=>p(function(){let t=a(pt),e=a(ft),n=a(dt),o=t.sampleRate,r=new Float32Array(50);t.copyFromChannel(r,0,e*o);let l=new Float32Array(2*o+50);t.copyFromChannel(l,0,(n-1)*o);let i=1/0,c=0;for(let t=0;t<2*o;t++){let e=ve(r,l,t);e<i&&(c=t,i=e)}return n-1+c/o}(),Xt.noRounding),()=>h(0,l-5)]}class we extends rt{constructor(t){super(),ot(this,t,$e,be,l,{})}}function xe(t,e,n){const o=t.slice();return o[13]=e[n],o}function _e(e){let n;return{c(){n=g("p"),n.textContent="An error occurred",_(n,"class","error svelte-1uobmhm")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function Ce(t){let e,n,o=t[0],r=[];for(let e=0;e<o.length;e+=1)r[e]=ke(xe(t,o,e));const l=t=>J(r[t],1,1,(()=>{r[t]=null}));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=w()},m(t,o){for(let e=0;e<r.length;e+=1)r[e].m(t,o);m(t,e,o),n=!0},p(t,n){if(7&n){let i;for(o=t[0],i=0;i<o.length;i+=1){const l=xe(t,o,i);r[i]?(r[i].p(l,n),G(r[i],1)):(r[i]=ke(l),r[i].c(),G(r[i],1),r[i].m(e.parentNode,e))}for(H(),i=o.length;i<r.length;i+=1)l(i);K()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)G(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)J(r[t]);n=!1},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(r,t),t&&v(e)}}}function ke(t){let e,n,r,l,i,a,c,u,s,f,d,p,y,w,C,A=t[13].name+"",E=Yt(t[13].loopStart,Xt.milli)+"",D=Yt(t[13].loopEnd,Xt.milli)+"";function B(){return t[3](t[13])}function L(){return t[4](t[13])}return d=new wt({props:{icon:kt}}),{c(){e=g("tr"),n=g("td"),r=b(A),l=$(),i=g("td"),a=b(E),c=b("\n                    - "),u=b(D),s=$(),f=g("td"),Z(d.$$.fragment),p=$(),_(n,"class","filename svelte-1uobmhm"),_(i,"class","time svelte-1uobmhm"),_(f,"class","trashcan svelte-1uobmhm")},m(t,o){m(t,e,o),h(e,n),h(n,r),h(e,l),h(e,i),h(i,a),h(i,c),h(i,u),h(e,s),h(e,f),tt(d,f,null),h(e,p),y=!0,w||(C=[x(n,"click",B),x(f,"click",L)],w=!0)},p(e,n){t=e,(!y||1&n)&&A!==(A=t[13].name+"")&&k(r,A),(!y||1&n)&&E!==(E=Yt(t[13].loopStart,Xt.milli)+"")&&k(a,E),(!y||1&n)&&D!==(D=Yt(t[13].loopEnd,Xt.milli)+"")&&k(u,D)},i(t){y||(G(d.$$.fragment,t),y=!0)},o(t){J(d.$$.fragment,t),y=!1},d(t){t&&v(e),et(d),w=!1,o(C)}}}function Ae(e){let n;return{c(){n=g("p"),n.textContent="Loading the library..."},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function Ee(t){let e,n,o,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Ae,then:Ce,catch:_e,value:0,blocks:[,,,]};return Q(n=t[0],r),{c(){e=g("table"),r.block.c(),_(e,"class","svelte-1uobmhm")},m(t,n){m(t,e,n),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,o=!0},p(e,[o]){t=e,r.ctx=t,1&o&&n!==(n=t[0])&&Q(n,r)||X(r,t,o)},i(t){o||(G(r.block),o=!0)},o(t){for(let t=0;t<3;t+=1){J(r.blocks[t])}o=!1},d(t){t&&v(e),r.block.d(),r.token=null,r=null}}}function De(t,e,n){let o,r,l,i,a,u;c(t,ut,(t=>n(5,o=t))),c(t,ht,(t=>n(6,r=t))),c(t,ft,(t=>n(7,l=t))),c(t,dt,(t=>n(8,i=t))),c(t,mt,(t=>n(9,a=t))),c(t,ct,(t=>n(10,u=t)));var f=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,l){function i(t){try{c(o.next(t))}catch(t){l(t)}}function a(t){try{c(o.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,a)}c((o=o.apply(t,e||[])).next())}))};function d(){return f(this,void 0,void 0,(function*(){return(yield Wt).getAll("library")}))}let p=d();function h(t){return f(this,void 0,void 0,(function*(){let e=yield Wt,n=yield e.get("library",t);s(ut,o=n.file,o),s(ht,r=t,r),s(ft,l=n.loopStart,l),s(dt,i=n.loopEnd,i),s(mt,a=!0,a),s(ct,u=at.extender,u)}))}function m(t){return f(this,void 0,void 0,(function*(){if(confirm(`Are you sure you want to delete ${t}?`)){let e=(yield Wt).transaction("library","readwrite").objectStore("library");yield e.delete(t),(yield e.getAllKeys()).length>0?n(0,p=d()):s(ct,u=at.filePicker,u)}}))}return[p,h,m,t=>h(t.name),t=>m(t.name)]}class Be extends rt{constructor(t){super(),ot(this,t,De,Ee,l,{})}}function Le(t){let e,n;return e=new we({}),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function je(t){let e,n;return e=new Be({}),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Ne(t){let e,n;return e=new Qt({}),{c(){Z(e.$$.fragment)},m(t,o){tt(e,t,o),n=!0},i(t){n||(G(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){et(e,t)}}}function Se(t){let e,n,o,r,l,i,a;const c=[Ne,je,Le],u=[];function s(t,e){return t[0]===at.filePicker?0:t[0]===at.library?1:2}return l=s(t),i=u[l]=c[l](t),{c(){e=$(),n=g("header"),n.innerHTML="<h1>Audio Extender</h1>",o=$(),r=g("main"),i.c(),document.title="Audio Extender",_(n,"class","svelte-1jpbzkx"),_(r,"class","svelte-1jpbzkx")},m(t,i){m(t,e,i),m(t,n,i),m(t,o,i),m(t,r,i),u[l].m(r,null),a=!0},p(t,[e]){let n=l;l=s(t),l!==n&&(H(),J(u[n],1,1,(()=>{u[n]=null})),K(),i=u[l],i||(i=u[l]=c[l](t),i.c()),G(i,1),i.m(r,null))},i(t){a||(G(i),a=!0)},o(t){J(i),a=!1},d(t){t&&v(e),t&&v(n),t&&v(o),t&&v(r),u[l].d()}}}function Ie(t,e,n){let o;return c(t,ct,(t=>n(0,o=t))),[o]}return new class extends rt{constructor(t){super(),ot(this,t,Ie,Se,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
