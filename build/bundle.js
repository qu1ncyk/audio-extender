var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function i(t){let e;return a(t,(t=>e=t))(),e}function c(t,e,n){t.$$.on_destroy.push(a(e,n))}function s(t){return null==t?"":t}function u(t,e,n){return t.set(n),e}function f(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function p(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function h(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function b(){return $(" ")}function v(){return $("")}function g(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function w(t){return""===t?null:+t}function x(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function C(t,e){t.value=null==e?"":e}function k(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}t.selectedIndex=-1}function _(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let A;function E(t){A=t}function D(){if(!A)throw new Error("Function called outside component initialization");return A}function L(){const t=D();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(e,n);r.slice().forEach((e=>{e.call(t,o)}))}}}const M=[],j=[],B=[],O=[],N=Promise.resolve();let S=!1;function I(t){B.push(t)}const z=new Set;let F=0;function U(){const t=A;do{for(;F<M.length;){const t=M[F];F++,E(t),R(t.$$)}for(E(null),M.length=0,F=0;j.length;)j.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];z.has(e)||(z.add(e),e())}B.length=0}while(M.length);for(;O.length;)O.pop()();S=!1,z.clear(),E(t)}function R(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}const P=new Set;let W;function T(){W={r:0,c:[],p:W}}function V(){W.r||r(W.c),W=W.p}function q(t,e){t&&t.i&&(P.delete(t),t.i(e))}function H(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),W.c.push((()=>{P.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function K(t,e){const n=e.token={};function r(t,r,o,l){if(e.token!==n)return;e.resolved=l;let a=e.ctx;void 0!==o&&(a=a.slice(),a[o]=l);const i=t&&(e.current=t)(a);let c=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(T(),H(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),V())})):e.block.d(1),i.c(),q(i,1),i.m(e.mount(),e.anchor),c=!0),e.block=i,e.blocks&&(e.blocks[r]=i),c&&U()}if((o=t)&&"object"==typeof o&&"function"==typeof o.then){const n=D();if(t.then((t=>{E(n),r(e.then,1,e.value,t),E(null)}),(t=>{if(E(n),r(e.catch,2,e.error,t),E(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}var o}function X(t,e,n){const r=e.slice(),{resolved:o}=t;t.current===t.then&&(r[t.value]=o),t.current===t.catch&&(r[t.error]=o),t.block.p(r,n)}function Y(t){t&&t.c()}function G(t,n,l,a){const{fragment:i,on_mount:c,on_destroy:s,after_update:u}=t.$$;i&&i.m(n,l),a||I((()=>{const n=c.map(e).filter(o);s?s.push(...n):r(n),t.$$.on_mount=[]})),u.forEach(I)}function J(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(t,e){-1===t.$$.dirty[0]&&(M.push(t),S||(S=!0,N.then(U)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Z(e,o,l,a,i,c,s,u=[-1]){const f=A;E(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:n(),dirty:u,skip_bound:!1,root:o.target||f.$$.root};s&&s(d.root);let m=!1;if(d.ctx=l?l(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),m&&Q(e,t)),n})):[],d.update(),m=!0,r(d.before_update),d.fragment=!!a&&a(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(p)}else d.fragment&&d.fragment.c();o.intro&&q(e.$$.fragment),G(e,o.target,o.anchor,o.customElement),U()}E(f)}class tt{$destroy(){J(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const et=[];function nt(e,n=t){let r;const o=new Set;function a(t){if(l(e,t)&&(e=t,r)){const t=!et.length;for(const t of o)t[1](),et.push(t,e);if(t){for(let t=0;t<et.length;t+=2)et[t][0](et[t+1]);et.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(l,i=t){const c=[l,i];return o.add(c),1===o.size&&(r=n(a)||t),l(e),()=>{o.delete(c),0===o.size&&(r(),r=null)}}}}function rt(e,n,l){const i=!Array.isArray(e),c=i?[e]:e,s=n.length<2;return u=e=>{let l=!1;const u=[];let f=0,d=t;const p=()=>{if(f)return;d();const r=n(i?u[0]:u,e);s?e(r):d=o(r)?r:t},m=c.map(((t,e)=>a(t,(t=>{u[e]=t,f&=~(1<<e),l&&p()}),(()=>{f|=1<<e}))));return l=!0,p(),function(){r(m),d()}},{subscribe:nt(l,u).subscribe};var u}var ot;!function(t){t[t.filePicker=0]="filePicker",t[t.library=1]="library",t[t.extender=2]="extender"}(ot||(ot={}));let lt=nt(ot.filePicker),at=nt(new ArrayBuffer(0)),it=nt(0),ct=nt(0),st=nt(0),ut=nt(new AudioBuffer({length:1,sampleRate:8e4})),ft=nt(""),dt=nt(!1);const pt=parseFloat;function mt(t,e=";"){let n;if(Array.isArray(t))n=t.filter((t=>t));else{n=[];for(const e in t)t[e]&&n.push(`${e}:${t[e]}`)}return n.join(e)}function ht(t){let e,n,r,o,l,a,i;function c(t,e){return"string"==typeof t[7][4]?bt:$t}let u=c(t),m=u(t);return{c(){e=h("svg"),n=h("g"),r=h("g"),m.c(),y(r,"transform",t[10]),y(n,"transform",o=`translate(${t[7][0]/2} ${t[7][1]/2})`),y(n,"transform-origin",l=t[7][0]/4+" 0"),y(e,"id",t[0]),y(e,"class",a=s(t[8])+" svelte-1cj2gr0"),y(e,"style",t[9]),y(e,"viewBox",i=`0 0 ${t[7][0]} ${t[7][1]}`),y(e,"aria-hidden","true"),y(e,"role","img"),y(e,"xmlns","http://www.w3.org/2000/svg")},m(t,o){d(t,e,o),f(e,n),f(n,r),m.m(r,null)},p(t,f){u===(u=c(t))&&m?m.p(t,f):(m.d(1),m=u(t),m&&(m.c(),m.m(r,null))),1024&f&&y(r,"transform",t[10]),128&f&&o!==(o=`translate(${t[7][0]/2} ${t[7][1]/2})`)&&y(n,"transform",o),128&f&&l!==(l=t[7][0]/4+" 0")&&y(n,"transform-origin",l),1&f&&y(e,"id",t[0]),256&f&&a!==(a=s(t[8])+" svelte-1cj2gr0")&&y(e,"class",a),512&f&&y(e,"style",t[9]),128&f&&i!==(i=`0 0 ${t[7][0]} ${t[7][1]}`)&&y(e,"viewBox",i)},d(t){t&&p(e),m.d()}}}function $t(t){let e,n,r,o,l,a,i,c,s,u;return{c(){e=h("path"),a=h("path"),y(e,"d",n=t[7][4][0]),y(e,"fill",r=t[3]||t[1]||"currentColor"),y(e,"fill-opacity",o=0!=t[6]?t[4]:t[5]),y(e,"transform",l=`translate(${t[7][0]/-2} ${t[7][1]/-2})`),y(a,"d",i=t[7][4][1]),y(a,"fill",c=t[2]||t[1]||"currentColor"),y(a,"fill-opacity",s=0!=t[6]?t[5]:t[4]),y(a,"transform",u=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(t,n){d(t,e,n),d(t,a,n)},p(t,f){128&f&&n!==(n=t[7][4][0])&&y(e,"d",n),10&f&&r!==(r=t[3]||t[1]||"currentColor")&&y(e,"fill",r),112&f&&o!==(o=0!=t[6]?t[4]:t[5])&&y(e,"fill-opacity",o),128&f&&l!==(l=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&y(e,"transform",l),128&f&&i!==(i=t[7][4][1])&&y(a,"d",i),6&f&&c!==(c=t[2]||t[1]||"currentColor")&&y(a,"fill",c),112&f&&s!==(s=0!=t[6]?t[5]:t[4])&&y(a,"fill-opacity",s),128&f&&u!==(u=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&y(a,"transform",u)},d(t){t&&p(e),t&&p(a)}}}function bt(t){let e,n,r,o;return{c(){e=h("path"),y(e,"d",n=t[7][4]),y(e,"fill",r=t[1]||t[2]||"currentColor"),y(e,"transform",o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)},m(t,n){d(t,e,n)},p(t,l){128&l&&n!==(n=t[7][4])&&y(e,"d",n),6&l&&r!==(r=t[1]||t[2]||"currentColor")&&y(e,"fill",r),128&l&&o!==(o=`translate(${t[7][0]/-2} ${t[7][1]/-2})`)&&y(e,"transform",o)},d(t){t&&p(e)}}}function vt(e){let n,r=e[7][4]&&ht(e);return{c(){r&&r.c(),n=v()},m(t,e){r&&r.m(t,e),d(t,n,e)},p(t,[e]){t[7][4]?r?r.p(t,e):(r=ht(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:t,o:t,d(t){r&&r.d(t),t&&p(n)}}}function gt(t,e,n){let r,o,l,a,{class:i=""}=e,{id:c=""}=e,{style:s=""}=e,{icon:u}=e,{size:f=""}=e,{color:d=""}=e,{fw:p=!1}=e,{pull:m=""}=e,{scale:h=1}=e,{translateX:$=0}=e,{translateY:b=0}=e,{rotate:v=""}=e,{flip:g=!1}=e,{spin:y=!1}=e,{pulse:w=!1}=e,{primaryColor:x=""}=e,{secondaryColor:C=""}=e,{primaryOpacity:k=1}=e,{secondaryOpacity:_=.4}=e,{swapOpacity:A=!1}=e;return t.$$set=t=>{"class"in t&&n(11,i=t.class),"id"in t&&n(0,c=t.id),"style"in t&&n(12,s=t.style),"icon"in t&&n(13,u=t.icon),"size"in t&&n(14,f=t.size),"color"in t&&n(1,d=t.color),"fw"in t&&n(15,p=t.fw),"pull"in t&&n(16,m=t.pull),"scale"in t&&n(17,h=t.scale),"translateX"in t&&n(18,$=t.translateX),"translateY"in t&&n(19,b=t.translateY),"rotate"in t&&n(20,v=t.rotate),"flip"in t&&n(21,g=t.flip),"spin"in t&&n(22,y=t.spin),"pulse"in t&&n(23,w=t.pulse),"primaryColor"in t&&n(2,x=t.primaryColor),"secondaryColor"in t&&n(3,C=t.secondaryColor),"primaryOpacity"in t&&n(4,k=t.primaryOpacity),"secondaryOpacity"in t&&n(5,_=t.secondaryOpacity),"swapOpacity"in t&&n(6,A=t.swapOpacity)},t.$$.update=()=>{8192&t.$$.dirty&&n(7,r=u&&u.icon||[0,0,"",[],""]),12584960&t.$$.dirty&&n(8,o=mt([i,"svelte-fa",y&&"spin",w&&"pulse"]," ")),118784&t.$$.dirty&&n(9,l=function(t,e,n,r){let o,l,a,i,c,s="-.125em";return r&&(c="center",l="1.25em"),n&&(o=n),e&&("lg"==e?(i="1.33333em",a=".75em",s="-.225em"):i="xs"==e?".75em":"sm"==e?".875em":e.replace("x","em")),mt([mt({float:o,width:l,height:"1em","line-height":a,"font-size":i,"text-align":c,"vertical-align":s,"transform-origin":"center",overflow:"visible"}),t])}(s,f,m,p)),4063232&t.$$.dirty&&n(10,a=function(t,e,n,r,o,l=1,a="",i=""){let c=1,s=1;return o&&("horizontal"==o?c=-1:"vertical"==o?s=-1:c=s=-1),mt([`translate(${pt(e)*l}${a},${pt(n)*l}${a})`,`scale(${c*pt(t)},${s*pt(t)})`,r&&`rotate(${r}${i})`]," ")}(h,$,b,v,g,512))},[c,d,x,C,k,_,A,r,o,l,a,i,s,u,f,p,m,h,$,b,v,g,y,w]}class yt extends tt{constructor(t){super(),Z(this,t,gt,vt,l,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}}
/*!
     * Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com
     * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
     * Copyright 2022 Fonticons, Inc.
     */var wt={prefix:"fas",iconName:"check",icon:[448,512,[10004,10003],"f00c","M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z"]},xt={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M272 63.1l-32 0c-26.51 0-48 21.49-48 47.1v288c0 26.51 21.49 48 48 48L272 448c26.51 0 48-21.49 48-48v-288C320 85.49 298.5 63.1 272 63.1zM80 63.1l-32 0c-26.51 0-48 21.49-48 48v288C0 426.5 21.49 448 48 448l32 0c26.51 0 48-21.49 48-48v-288C128 85.49 106.5 63.1 80 63.1z"]},Ct={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M361 215C375.3 223.8 384 239.3 384 256C384 272.7 375.3 288.2 361 296.1L73.03 472.1C58.21 482 39.66 482.4 24.52 473.9C9.377 465.4 0 449.4 0 432V80C0 62.64 9.377 46.63 24.52 38.13C39.66 29.64 58.21 29.99 73.03 39.04L361 215z"]},kt={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM31.1 128H416V448C416 483.3 387.3 512 352 512H95.1C60.65 512 31.1 483.3 31.1 448V128zM111.1 208V432C111.1 440.8 119.2 448 127.1 448C136.8 448 143.1 440.8 143.1 432V208C143.1 199.2 136.8 192 127.1 192C119.2 192 111.1 199.2 111.1 208zM207.1 208V432C207.1 440.8 215.2 448 223.1 448C232.8 448 240 440.8 240 432V208C240 199.2 232.8 192 223.1 192C215.2 192 207.1 199.2 207.1 208zM304 208V432C304 440.8 311.2 448 320 448C328.8 448 336 440.8 336 432V208C336 199.2 328.8 192 320 192C311.2 192 304 199.2 304 208z"]};let _t,At;const Et=new WeakMap,Dt=new WeakMap,Lt=new WeakMap,Mt=new WeakMap,jt=new WeakMap;let Bt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Dt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||Lt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return St(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function Ot(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(At||(At=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(It(this),e),St(Et.get(this))}:function(...e){return St(t.apply(It(this),e))}:function(e,...n){const r=t.call(It(this),e,...n);return Lt.set(r,e.sort?e.sort():[e]),St(r)}}function Nt(t){return"function"==typeof t?Ot(t):(t instanceof IDBTransaction&&function(t){if(Dt.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{e(),r()},l=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)}));Dt.set(t,e)}(t),e=t,(_t||(_t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>e instanceof t))?new Proxy(t,Bt):t);var e}function St(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{e(St(t.result)),r()},l=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)}));return e.then((e=>{e instanceof IDBCursor&&Et.set(e,t)})).catch((()=>{})),jt.set(e,t),e}(t);if(Mt.has(t))return Mt.get(t);const e=Nt(t);return e!==t&&(Mt.set(t,e),jt.set(e,t)),e}const It=t=>jt.get(t);const zt=["get","getKey","getAll","getAllKeys","count"],Ft=["put","add","delete","clear"],Ut=new Map;function Rt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ut.get(e))return Ut.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=Ft.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!zt.includes(n))return;const l=async function(t,...e){const l=this.transaction(t,o?"readwrite":"readonly");let a=l.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&l.done]))[0]};return Ut.set(e,l),l}Bt=(t=>({...t,get:(e,n,r)=>Rt(e,n)||t.get(e,n,r),has:(e,n)=>!!Rt(e,n)||t.has(e,n)}))(Bt);let Pt=function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:l}={}){const a=indexedDB.open(t,e),i=St(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(St(a.result),t.oldVersion,t.newVersion,St(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),i.then((t=>{l&&t.addEventListener("close",(()=>l())),o&&t.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),i}("audio-extender",1,{upgrade(t,e,n,r){if(0===e)t.createObjectStore("library",{keyPath:"name"})}});function Wt(e){let n;return{c(){n=m("button"),n.textContent="Library is not available",n.disabled=!0,y(n,"class","svelte-1owbxbf")},m(t,e){d(t,n,e)},p:t,d(t){t&&p(n)}}}function Tt(t){let e;let n=function(t,e){return t[14]?Vt:qt}(t),r=n(t);return{c(){r.c(),e=v()},m(t,n){r.m(t,n),d(t,e,n)},p(t,e){r.p(t,e)},d(t){r.d(t),t&&p(e)}}}function Vt(e){let n;return{c(){n=m("button"),n.textContent="Library is empty",n.disabled=!0,y(n,"class","svelte-1owbxbf")},m(t,e){d(t,n,e)},p:t,d(t){t&&p(n)}}}function qt(e){let n,r,o;return{c(){n=m("button"),n.textContent="Choose from library",y(n,"class","svelte-1owbxbf")},m(t,l){d(t,n,l),r||(o=g(n,"click",e[10]),r=!0)},p:t,d(t){t&&p(n),r=!1,o()}}}function Ht(e){let n;return{c(){n=m("button"),n.textContent="Waiting for library...",n.disabled=!0,y(n,"class","svelte-1owbxbf")},m(t,e){d(t,n,e)},p:t,d(t){t&&p(n)}}}function Kt(t){let e,n,o,l,a,i,c,s,u,h,$,v,w,x,k,_,A,E;v=new yt({props:{icon:wt}});let D={ctx:t,current:null,token:null,hasCatch:!0,pending:Ht,then:Tt,catch:Wt,value:14};return K(t[5](),D),{c(){e=m("p"),e.textContent="Choose an audio file to extend",n=b(),o=m("div"),l=m("input"),a=b(),i=m("span"),i.textContent="or",c=b(),s=m("form"),u=m("input"),h=b(),$=m("button"),Y(v.$$.fragment),w=b(),x=m("span"),x.textContent="or",k=b(),D.block.c(),y(l,"type","file"),y(l,"accept","audio/*,video/*"),y(l,"class","svelte-1owbxbf"),y(i,"class","or svelte-1owbxbf"),y(u,"type","url"),y(u,"placeholder","Enter a URL"),y(u,"class","svelte-1owbxbf"),y($,"type","submit"),y($,"class","svelte-1owbxbf"),y(s,"class","url-input-container svelte-1owbxbf"),y(x,"class","or svelte-1owbxbf"),y(o,"class","input-container svelte-1owbxbf")},m(r,p){var m;d(r,e,p),d(r,n,p),d(r,o,p),f(o,l),t[6](l),f(o,a),f(o,i),f(o,c),f(o,s),f(s,u),C(u,t[1]),f(s,h),f(s,$),G(v,$,null),f(o,w),f(o,x),f(o,k),D.block.m(o,D.anchor=null),D.mount=()=>o,D.anchor=null,_=!0,A||(E=[g(l,"input",t[7]),g(u,"input",t[8]),g(s,"submit",(m=t[9],function(t){return t.preventDefault(),m.call(this,t)}))],A=!0)},p(e,[n]){t=e,2&n&&C(u,t[1]),X(D,t,n)},i(t){_||(q(v.$$.fragment,t),_=!0)},o(t){H(v.$$.fragment,t),_=!1},d(l){l&&p(e),l&&p(n),l&&p(o),t[6](null),J(v),D.block.d(),D.token=null,D=null,A=!1,r(E)}}}function Xt(t,e,n){let r,o,l,a,i;var s;async function f(t){if(t===s.file)u(at,l=await new Promise((t=>{let e=new FileReader;e.onload=e=>{let n=e.target.result;"object"==typeof n&&t(n)},e.onerror=t=>{console.error(t.target.error),alert("Could not read the file")},u(ft,r=a.files[0].name,r),e.readAsArrayBuffer(a.files[0])})),l);else try{let t=new URL(i).pathname.split("/");u(ft,r=decodeURIComponent(t[t.length-1]||t[t.length-2]),r);let e=await fetch(i);u(at,l=await e.arrayBuffer(),l)}catch(t){console.error(t),alert("Could not read the file, because the server does not allow it. Please download and upload it manually.")}0!==l.byteLength&&u(lt,o=ot.extender,o)}c(t,ft,(t=>n(11,r=t))),c(t,lt,(t=>n(3,o=t))),c(t,at,(t=>n(12,l=t))),function(t){t[t.file=0]="file",t[t.url=1]="url"}(s||(s={}));return[a,i,s,o,f,async function(){let t=await Pt;return 0===(await t.getAllKeys("library",null,1)).length},function(t){j[t?"unshift":"push"]((()=>{a=t,n(0,a)}))},()=>f(s.file),function(){i=this.value,n(1,i)},()=>f(s.url),()=>u(lt,o=ot.library,o)]}class Yt extends tt{constructor(t){super(),Z(this,t,Xt,Kt,l,{})}}function Gt(t){let e=Math.floor(t/3600),n=Math.floor(t/60%60),r=t%60;return e>0?`${e}:${Jt(n)}:${Jt(r)}`:`${n}:${Jt(r)}`}function Jt(t){return t<10?"0"+t:String(t)}function Qt(e){let n,r;return n=new yt({props:{icon:Ct}}),{c(){Y(n.$$.fragment)},m(t,e){G(n,t,e),r=!0},p:t,i(t){r||(q(n.$$.fragment,t),r=!0)},o(t){H(n.$$.fragment,t),r=!1},d(t){J(n,t)}}}function Zt(e){let n,r;return n=new yt({props:{icon:xt}}),{c(){Y(n.$$.fragment)},m(t,e){G(n,t,e),r=!0},p:t,i(t){r||(q(n.$$.fragment,t),r=!0)},o(t){H(n.$$.fragment,t),r=!1},d(t){J(n,t)}}}function te(t){let e,n,o,l,a,i,c,s,u,h,v,w,k,_,A,E,D=Gt(Math.floor(t[3]))+"",L=Gt(Math.floor(t[4]))+"";const M=[Zt,Qt],j=[];function B(t,e){return t[2]?0:1}return o=B(t),l=j[o]=M[o](t),{c(){e=m("div"),n=m("span"),l.c(),a=b(),i=m("span"),c=$(D),s=b(),u=m("input"),v=b(),w=m("span"),k=$(L),y(n,"class","play-button svelte-7mk9qe"),y(i,"class","current time svelte-7mk9qe"),y(u,"type","range"),y(u,"max",t[4]),y(u,"step","any"),y(u,"style",h=`\n            --loop-start: ${t[0]/t[4]*100}%;\n            --loop-end: ${t[1]/t[4]*100}%;\n        `),y(u,"class","svelte-7mk9qe"),y(w,"class","end time svelte-7mk9qe"),y(e,"class","player-container svelte-7mk9qe")},m(r,l){d(r,e,l),f(e,n),j[o].m(n,null),f(e,a),f(e,i),f(i,c),f(e,s),f(e,u),C(u,t[3]),f(e,v),f(e,w),f(w,k),_=!0,A||(E=[g(n,"click",t[5]),g(u,"change",t[10]),g(u,"input",t[10]),g(u,"mousedown",t[6]),g(u,"mouseup",t[7]),g(u,"touchstart",t[6],{passive:!0}),g(u,"touchend",t[7],{passive:!0})],A=!0)},p(t,[e]){let r=o;o=B(t),o===r?j[o].p(t,e):(T(),H(j[r],1,1,(()=>{j[r]=null})),V(),l=j[o],l?l.p(t,e):(l=j[o]=M[o](t),l.c()),q(l,1),l.m(n,null)),(!_||8&e)&&D!==(D=Gt(Math.floor(t[3]))+"")&&x(c,D),(!_||16&e)&&y(u,"max",t[4]),(!_||19&e&&h!==(h=`\n            --loop-start: ${t[0]/t[4]*100}%;\n            --loop-end: ${t[1]/t[4]*100}%;\n        `))&&y(u,"style",h),8&e&&C(u,t[3]),(!_||16&e)&&L!==(L=Gt(Math.floor(t[4]))+"")&&x(k,L)},i(t){_||(q(l),_=!0)},o(t){H(l),_=!1},d(t){t&&p(e),j[o].d(),A=!1,r(E)}}}function ee(t,e,n){let r,o,l,a,i;c(t,it,(t=>n(4,r=t))),c(t,ut,(t=>n(15,o=t))),c(t,at,(t=>n(16,l=t))),c(t,ct,(t=>n(0,a=t))),c(t,st,(t=>n(1,i=t)));let s,f=new AudioContext;function d(t,e,r){n(3,$=e),m&&s.stop(),n(9,s=f.createBufferSource()),s.connect(f.destination),n(9,s.buffer=o,s),s.start(t,e,r),"suspended"===f.state&&f.resume(),m=!0,n(2,p=!0),h=Date.now()/1e3-$,v()}let p=!1,m=!1;f.onstatechange=()=>{m&&"running"===f.state?(n(2,p=!0),h=Date.now()/1e3-$,v()):n(2,p=!1)};let h,$=0,b=!1;function v(){$>=i&&(h+=i-a),b||n(3,$=Date.now()/1e3-h),p&&requestAnimationFrame(v)}let g=L();return(async()=>{try{let t=new ArrayBuffer(l.byteLength);new Uint8Array(t).set(new Uint8Array(l)),n(9,s=f.createBufferSource()),u(ut,o=await f.decodeAudioData(t),o),n(9,s.buffer=o,s),u(it,r=s.buffer.duration,r),g("duration")}catch(t){console.error(t),alert("Could not play the audio file")}})(),t.$$.update=()=>{515&t.$$.dirty&&s&&(n(9,s.loop=!0,s),n(9,s.loopStart=a,s),n(9,s.loopEnd=i,s))},[a,i,p,$,r,function(){p?f.suspend():m?f.resume():d(0,$)},function(){b=!0},function(){b=!1,h=Date.now()/1e3-$,m&&s.stop(),p?d(0,$):m=!1},d,s,function(){$=w(this.value),n(3,$)}]}class ne extends tt{constructor(t){super(),Z(this,t,ee,te,l,{start:8})}get start(){return this.$$.ctx[8]}}function re(t,e,n,r){var o,l,a=!0,c="withOld"in n,s=rt(t,((t,n)=>{if(o=n,c&&(l=t),a){let r=e(t,n);if(!(e.length<2))return r;n(r)}}),r),u=!Array.isArray(t),f=e=>{a=!1,u?t.set(e):e.forEach(((e,n)=>{t[n].set(e)})),a=!0};c&&(n=n.withOld);var d=n.length>=(c?3:2),p=null;var m=!1;function h(t){var e,r,a,u;if(m)return u=t(i(s)),void o(u);var h=s.subscribe((t=>{m?e?r=!0:e=!0:a=t}));u=t(a),m=!0,o(u),h(),m=!1,r&&(u=i(s)),e&&function(t){if(p&&(p(),p=null),c)var e=n(t,l,f);else e=n(t,f);d?"function"==typeof e&&(p=e):f(e)}(u)}return{subscribe:s.subscribe,set(t){h((()=>t))},update:h}}function oe(e){let n,o,l,a,i,c,u,h,$,v,w,x,k,_,A,E,D,L,M,j,B;return{c(){n=m("div"),o=m("button"),o.textContent="-1ms",l=b(),a=m("button"),a.textContent="-10ms",i=b(),c=m("button"),c.textContent="-0.1s",u=b(),h=m("button"),h.textContent="-1s",$=b(),v=m("input"),x=b(),k=m("button"),k.textContent="+1ms",_=b(),A=m("button"),A.textContent="+10ms",E=b(),D=m("button"),D.textContent="+0.1s",L=b(),M=m("button"),M.textContent="+1s",y(o,"class","row1 col1 svelte-1jd5ba9"),y(a,"class","row1 col2 svelte-1jd5ba9"),y(c,"class","row2 col1 svelte-1jd5ba9"),y(h,"class","row2 col2 svelte-1jd5ba9"),y(v,"class",w=s(e[1]?"":"invalid")+" svelte-1jd5ba9"),y(v,"type","text"),y(k,"class","row1 col3 svelte-1jd5ba9"),y(A,"class","row1 col4 svelte-1jd5ba9"),y(D,"class","row2 col3 svelte-1jd5ba9"),y(M,"class","row2 col4 svelte-1jd5ba9"),y(n,"class","input-container svelte-1jd5ba9")},m(t,r){d(t,n,r),f(n,o),f(n,l),f(n,a),f(n,i),f(n,c),f(n,u),f(n,h),f(n,$),f(n,v),C(v,e[2]),f(n,x),f(n,k),f(n,_),f(n,A),f(n,E),f(n,D),f(n,L),f(n,M),j||(B=[g(o,"click",e[6]),g(a,"click",e[7]),g(c,"click",e[8]),g(h,"click",e[9]),g(v,"input",e[10]),g(k,"click",e[11]),g(A,"click",e[12]),g(D,"click",e[13]),g(M,"click",e[14])],j=!0)},p(t,[e]){2&e&&w!==(w=s(t[1]?"":"invalid")+" svelte-1jd5ba9")&&y(v,"class",w),4&e&&v.value!==t[2]&&C(v,t[2])},i:t,o:t,d(t){t&&p(n),j=!1,r(B)}}}function le(e,n,r){let o,l,i=t,s=()=>(i(),i=a(f,(t=>r(15,o=t))),f);e.$$.on_destroy.push((()=>i()));let{value:f}=n;s();let{max:d=1/0}=n,p=re(f,Gt,{withOld(t,e){let n=function(t){let e=t.split(":");return 1===e.length?Number(e[0]):2===e.length?60*Number(e[0])+Number(e[1]):3===e.length?3600*Number(e[0])+60*Number(e[1])+Number(e[2]):NaN}(t);return r(1,m=n<=d&&n>=0&&!isNaN(n)),m?n:e}});c(e,p,(t=>r(2,l=t)));let m=!0;function h(t){let e=o+t;var n;u(f,e<0?o=0:e>d?o=d:(n=e,o=Math.round(1e3*n)/1e3),o)}return e.$$set=t=>{"value"in t&&s(r(0,f=t.value)),"max"in t&&r(5,d=t.max)},[f,m,l,p,h,d,()=>h(-.001),()=>h(-.01),()=>h(-.1),()=>h(-1),function(){l=this.value,p.set(l)},()=>h(.001),()=>h(.01),()=>h(.1),()=>h(1)]}class ae extends tt{constructor(t){super(),Z(this,t,le,oe,l,{value:0,max:5})}}function ie(e){let n,r,o;return I(e[7]),{c(){n=m("canvas"),y(n,"width","0"),y(n,"height","151"),y(n,"class","svelte-m5vup3")},m(t,l){d(t,n,l),e[8](n),r||(o=g(window,"resize",e[7]),r=!0)},p:t,i:t,o:t,d(t){t&&p(n),e[8](null),r=!1,o()}}}function ce(t,e,n){let r,o,l;c(t,st,(t=>n(4,r=t))),c(t,ct,(t=>n(5,o=t))),c(t,ut,(t=>n(6,l=t)));let a,i,s,u,{graphDomain:f}=e;function d(t){let e;e="sample"===f?u:f*l.sampleRate;let n=new Float32Array(e);l.copyFromChannel(n,0,l.sampleRate*t);let r=new Uint8Array(e);for(let t=0;t<r.length;t++)r[t]=Math.round(75*(1-n[t]));return r}var p;return p=()=>{i=a.getContext("2d")},D().$$.on_mount.push(p),t.$$set=t=>{"graphDomain"in t&&n(2,f=t.graphDomain)},t.$$.update=()=>{1&t.$$.dirty&&n(3,u=.9*s),124&t.$$.dirty&&l.length>1&&(n(1,a.width=u,a),function(){let t=d(o),e=d(r);i.fillStyle="white",i.fillRect(0,0,u,256),i.beginPath(),i.lineWidth=2,i.strokeStyle="lime",i.moveTo(0,t[0]);for(let e=1;e<t.length;e++){let n=e;"sample"!==f&&(n=e/t.length*u),i.lineTo(n,t[e])}i.stroke(),i.beginPath(),i.lineWidth=2,i.strokeStyle="rgba(0, 0, 255, 0.5)",i.moveTo(0,e[0]);for(let t=1;t<e.length;t++){let n=t;"sample"!==f&&(n=t/e.length*u),i.lineTo(n,e[t])}i.stroke()}())},[s,a,f,u,r,o,l,function(){n(0,s=window.innerWidth)},function(t){j[t?"unshift":"push"]((()=>{a=t,n(1,a),n(6,l),n(5,o),n(4,r),n(3,u),n(2,f),n(0,s)}))}]}class se extends tt{constructor(t){super(),Z(this,t,ce,ie,l,{graphDomain:2})}}var ue=function(t,e){e=e||{};var n,r=t.numberOfChannels,o=t.sampleRate,l=e.float32?3:1,a=3===l?32:16;n=2===r?function(t,e){var n=t.length+e.length,r=new Float32Array(n),o=0,l=0;for(;o<n;)r[o++]=t[l],r[o++]=e[l],l++;return r}(t.getChannelData(0),t.getChannelData(1)):t.getChannelData(0);return function(t,e,n,r,o){var l=o/8,a=r*l,i=new ArrayBuffer(44+t.length*l),c=new DataView(i);fe(c,0,"RIFF"),c.setUint32(4,36+t.length*l,!0),fe(c,8,"WAVE"),fe(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,e,!0),c.setUint16(22,r,!0),c.setUint32(24,n,!0),c.setUint32(28,n*a,!0),c.setUint16(32,a,!0),c.setUint16(34,o,!0),fe(c,36,"data"),c.setUint32(40,t.length*l,!0),1===e?function(t,e,n){for(var r=0;r<n.length;r++,e+=2){var o=Math.max(-1,Math.min(1,n[r]));t.setInt16(e,o<0?32768*o:32767*o,!0)}}(c,44,t):function(t,e,n){for(var r=0;r<n.length;r++,e+=4)t.setFloat32(e,n[r],!0)}(c,44,t);return i}(n,l,o,r,a)};function fe(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}function de(e){let n,o,l,a,i,c,s,u,h,v,_,A,E,D,L,M,j="duration"===e[0]?"min":"";return{c(){n=m("div"),o=m("h2"),o.textContent="Download",l=b(),a=m("select"),i=m("option"),i.textContent="Amount of loops",c=m("option"),c.textContent="Minimal duration",s=b(),u=m("input"),h=b(),v=$(j),_=b(),A=m("p"),A.textContent="Note: these files can get quite big",E=b(),D=m("button"),D.textContent="Download",i.__value="loops",i.value=i.__value,c.__value="duration",c.value=c.__value,void 0===e[0]&&I((()=>e[7].call(a))),y(u,"type","number"),y(u,"class","svelte-11znw9r"),y(n,"class","download-container svelte-11znw9r")},m(t,r){d(t,n,r),f(n,o),f(n,l),f(n,a),f(a,i),f(a,c),k(a,e[0]),f(n,s),f(n,u),C(u,e[1]),f(n,h),f(n,v),f(n,_),f(n,A),f(n,E),f(n,D),L||(M=[g(a,"change",e[7]),g(u,"input",e[8]),g(D,"click",e[2])],L=!0)},p(t,[e]){1&e&&k(a,t[0]),2&e&&w(u.value)!==t[1]&&C(u,t[1]),1&e&&j!==(j="duration"===t[0]?"min":"")&&x(v,j)},i:t,o:t,d(t){t&&p(n),L=!1,r(M)}}}function pe(t,e,n){let r,o,l,a,i;c(t,ut,(t=>n(3,r=t))),c(t,st,(t=>n(4,o=t))),c(t,ct,(t=>n(5,l=t))),c(t,it,(t=>n(6,a=t)));let s,u,f,d,p=2;function m(t,e){let n=new Float32Array(s*d);r.copyFromChannel(n,t);let a=new Float32Array(u*d);r.copyFromChannel(a,t,l*d);let i=new Float32Array(f*d);r.copyFromChannel(i,t,o*d);let c=new Float32Array(d*(s+u*e+f));c.set(n);for(let t=0;t<e;t++)c.set(a,(s+u*t)*d);return c.set(i,(s+u*e)*d),c}return t.$$.update=()=>{120&t.$$.dirty&&(s=l,u=o-l,f=a-o,d=r.sampleRate)},[i,p,function(){let t;t="loops"===i?p:Math.ceil((p-(s+f))/u);let e=new AudioBuffer({length:d*(s+u*t+f),sampleRate:r.sampleRate,numberOfChannels:r.numberOfChannels});for(let n=0;n<r.numberOfChannels;n++){let r=m(n,t);e.copyToChannel(r,n)}let n=ue(e),o=new Uint8Array(n),l=new Blob([o],{type:"audio/vnd.wav"}),a=URL.createObjectURL(l),c=document.createElement("a");c.href=a,c.download="extended.wav",c.click(),URL.revokeObjectURL(a)},r,o,l,a,function(){i=_(this),n(0,i)},function(){p=w(this.value),n(1,p)}]}class me extends tt{constructor(t){super(),Z(this,t,pe,de,l,{})}}function he(t,e,n){let r=0;for(let o=0;o<t.length;o++)r+=Math.pow(t[o]-e[o+n],2);return r}function $e(t){let e;return{c(){e=$("Add to library")},m(t,n){d(t,e,n)},d(t){t&&p(e)}}}function be(t){let e;return{c(){e=$("Update in library")},m(t,n){d(t,e,n)},d(t){t&&p(e)}}}function ve(t){let e,n,o,l,a,i,c,s,u,h,$,v,w,x,C,_,A,E,D,L,M,B,N,S,z,F,U,R,P,W,T,V,K,X,Q,Z,tt;function et(e){t[6](e)}let nt={};function rt(t,e){return t[2]?be:$e}void 0!==t[0]&&(nt.start=t[0]),e=new ne({props:nt}),j.push((()=>function(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}(e,"start",et))),e.$on("duration",t[7]),s=new ae({props:{value:ct,max:t[3]}}),w=new ae({props:{value:st,max:t[4]}}),_=new se({props:{graphDomain:t[1]}});let ot=rt(t),lt=ot(t);return X=new me({}),{c(){Y(e.$$.fragment),o=b(),l=m("div"),a=m("div"),i=m("h2"),i.textContent="Loop from",c=b(),Y(s.$$.fragment),u=b(),h=m("div"),$=m("h2"),$.textContent="until",v=b(),Y(w.$$.fragment),x=b(),C=m("div"),Y(_.$$.fragment),A=b(),E=m("select"),D=m("option"),D.textContent="Pixel = sample",L=m("option"),L.textContent="Width = 50ms",M=m("option"),M.textContent="Width = 0.1s",B=m("option"),B.textContent="Width = 0.5s",N=m("option"),N.textContent="Width = 1s",S=m("option"),S.textContent="Width = 5s",z=b(),F=m("button"),F.textContent="Adjust end time",U=b(),R=m("button"),R.textContent="Test",P=b(),W=m("button"),lt.c(),T=b(),V=m("br"),K=b(),Y(X.$$.fragment),y(a,"class","time-input svelte-1o22igu"),y(h,"class","time-input svelte-1o22igu"),y(l,"class","input-container svelte-1o22igu"),D.__value="sample",D.value=D.__value,L.__value="0.05",L.value=L.__value,M.__value="0.1",M.value=M.__value,B.__value="0.5",B.value=B.__value,N.__value="1",N.value=N.__value,S.__value="5",S.value=S.__value,void 0===t[1]&&I((()=>t[8].call(E)))},m(n,r){G(e,n,r),d(n,o,r),d(n,l,r),f(l,a),f(a,i),f(a,c),G(s,a,null),f(l,u),f(l,h),f(h,$),f(h,v),G(w,h,null),d(n,x,r),d(n,C,r),G(_,C,null),d(n,A,r),d(n,E,r),f(E,D),f(E,L),f(E,M),f(E,B),f(E,N),f(E,S),k(E,t[1]),d(n,z,r),d(n,F,r),d(n,U,r),d(n,R,r),d(n,P,r),d(n,W,r),lt.m(W,null),d(n,T,r),d(n,V,r),d(n,K,r),G(X,n,r),Q=!0,Z||(tt=[g(E,"change",t[8]),g(F,"click",t[9]),g(R,"click",t[10]),g(W,"click",t[5])],Z=!0)},p(t,[r]){const o={};var l;!n&&1&r&&(n=!0,o.start=t[0],l=()=>n=!1,O.push(l)),e.$set(o);const a={};8&r&&(a.max=t[3]),s.$set(a);const i={};16&r&&(i.max=t[4]),w.$set(i);const c={};2&r&&(c.graphDomain=t[1]),_.$set(c),2&r&&k(E,t[1]),ot!==(ot=rt(t))&&(lt.d(1),lt=ot(t),lt&&(lt.c(),lt.m(W,null)))},i(t){Q||(q(e.$$.fragment,t),q(s.$$.fragment,t),q(w.$$.fragment,t),q(_.$$.fragment,t),q(X.$$.fragment,t),Q=!0)},o(t){H(e.$$.fragment,t),H(s.$$.fragment,t),H(w.$$.fragment,t),H(_.$$.fragment,t),H(X.$$.fragment,t),Q=!1},d(t){J(e,t),t&&p(o),t&&p(l),J(s),J(w),t&&p(x),t&&p(C),J(_),t&&p(A),t&&p(E),t&&p(z),t&&p(F),t&&p(U),t&&p(R),t&&p(P),t&&p(W),lt.d(),t&&p(T),t&&p(V),t&&p(K),J(X,t),Z=!1,r(tt)}}}function ge(t,e,n){let r,o,l,a,s,f,d,p;c(t,dt,(t=>n(2,r=t))),c(t,at,(t=>n(11,o=t))),c(t,st,(t=>n(3,l=t))),c(t,ct,(t=>n(12,a=t))),c(t,ft,(t=>n(13,s=t))),c(t,it,(t=>n(4,f=t)));return[d,p,r,l,f,async function(){(await Pt).put("library",{name:s,loopStart:a,loopEnd:l,file:o}),u(dt,r=!0,r)},function(t){d=t,n(0,d)},()=>{r||u(st,l=Math.floor(f),l)},function(){p=_(this),n(1,p)},()=>u(st,l=function(){let t=i(ut),e=i(ct),n=i(st),r=t.sampleRate,o=new Float32Array(250);t.copyFromChannel(o,0,e*r);let l=new Float32Array(2*r+250);t.copyFromChannel(l,0,(n-1)*r);let a=1/0,c=0;for(let t=0;t<2*r;t++){let e=he(o,l,t);e<a&&(c=t,a=e)}return n-1+c/r}(),l),()=>d(0,l-5)]}class ye extends tt{constructor(t){super(),Z(this,t,ge,ve,l,{})}}function we(t,e,n){const r=t.slice();return r[12]=e[n],r}function xe(e){let n;return{c(){n=m("p"),n.textContent="An error occurred",y(n,"class","error svelte-1uobmhm")},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Ce(t){let e,n,r=t[0],o=[];for(let e=0;e<r.length;e+=1)o[e]=ke(we(t,r,e));const l=t=>H(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=v()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);d(t,e,r),n=!0},p(t,n){if(7&n){let a;for(r=t[0],a=0;a<r.length;a+=1){const l=we(t,r,a);o[a]?(o[a].p(l,n),q(o[a],1)):(o[a]=ke(l),o[a].c(),q(o[a],1),o[a].m(e.parentNode,e))}for(T(),a=r.length;a<o.length;a+=1)l(a);V()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)q(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)H(o[t]);n=!1},d(t){!function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(o,t),t&&p(e)}}}function ke(t){let e,n,o,l,a,i,c,s,u,h,v,w,C,k,_,A=t[12].name+"",E=Gt(Math.round(t[12].loopStart))+"",D=Gt(Math.round(t[12].loopEnd))+"";function L(){return t[3](t[12])}function M(){return t[4](t[12])}return v=new yt({props:{icon:kt}}),{c(){e=m("tr"),n=m("td"),o=$(A),l=b(),a=m("td"),i=$(E),c=$("\n                    - "),s=$(D),u=b(),h=m("td"),Y(v.$$.fragment),w=b(),y(n,"class","filename svelte-1uobmhm"),y(a,"class","time svelte-1uobmhm"),y(h,"class","trashcan svelte-1uobmhm")},m(t,r){d(t,e,r),f(e,n),f(n,o),f(e,l),f(e,a),f(a,i),f(a,c),f(a,s),f(e,u),f(e,h),G(v,h,null),f(e,w),C=!0,k||(_=[g(n,"click",L),g(h,"click",M)],k=!0)},p(e,n){t=e,(!C||1&n)&&A!==(A=t[12].name+"")&&x(o,A),(!C||1&n)&&E!==(E=Gt(Math.round(t[12].loopStart))+"")&&x(i,E),(!C||1&n)&&D!==(D=Gt(Math.round(t[12].loopEnd))+"")&&x(s,D)},i(t){C||(q(v.$$.fragment,t),C=!0)},o(t){H(v.$$.fragment,t),C=!1},d(t){t&&p(e),J(v),k=!1,r(_)}}}function _e(e){let n;return{c(){n=m("p"),n.textContent="Loading the library..."},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&p(n)}}}function Ae(t){let e,n,r,o={ctx:t,current:null,token:null,hasCatch:!0,pending:_e,then:Ce,catch:xe,value:0,blocks:[,,,]};return K(n=t[0],o),{c(){e=m("table"),o.block.c(),y(e,"class","svelte-1uobmhm")},m(t,n){d(t,e,n),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,r=!0},p(e,[r]){t=e,o.ctx=t,1&r&&n!==(n=t[0])&&K(n,o)||X(o,t,r)},i(t){r||(q(o.block),r=!0)},o(t){for(let t=0;t<3;t+=1){H(o.blocks[t])}r=!1},d(t){t&&p(e),o.block.d(),o.token=null,o=null}}}function Ee(t,e,n){let r,o,l,a,i,s;async function f(){return(await Pt).getAll("library")}c(t,lt,(t=>n(5,r=t))),c(t,dt,(t=>n(6,o=t))),c(t,st,(t=>n(7,l=t))),c(t,ct,(t=>n(8,a=t))),c(t,ft,(t=>n(9,i=t))),c(t,at,(t=>n(10,s=t)));let d=f();async function p(t){let e=await Pt,n=await e.get("library",t);u(at,s=n.file,s),u(ft,i=t,i),u(ct,a=n.loopStart,a),u(st,l=n.loopEnd,l),u(dt,o=!0,o),u(lt,r=ot.extender,r)}async function m(t){if(confirm(`Are you sure you want to delete ${t}?`)){let e=(await Pt).transaction("library","readwrite").objectStore("library");await e.delete(t),(await e.getAllKeys()).length>0?n(0,d=f()):u(lt,r=ot.filePicker,r)}}return[d,p,m,t=>p(t.name),t=>m(t.name)]}class De extends tt{constructor(t){super(),Z(this,t,Ee,Ae,l,{})}}function Le(t){let e,n;return e=new ye({}),{c(){Y(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function Me(t){let e,n;return e=new De({}),{c(){Y(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function je(t){let e,n;return e=new Yt({}),{c(){Y(e.$$.fragment)},m(t,r){G(e,t,r),n=!0},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){J(e,t)}}}function Be(t){let e,n,r,o,l,a,i;const c=[je,Me,Le],s=[];function u(t,e){return t[0]===ot.filePicker?0:t[0]===ot.library?1:2}return l=u(t),a=s[l]=c[l](t),{c(){e=b(),n=m("header"),n.innerHTML="<h1>Audio Extender</h1>",r=b(),o=m("main"),a.c(),document.title="Audio Extender",y(n,"class","svelte-1jpbzkx"),y(o,"class","svelte-1jpbzkx")},m(t,a){d(t,e,a),d(t,n,a),d(t,r,a),d(t,o,a),s[l].m(o,null),i=!0},p(t,[e]){let n=l;l=u(t),l!==n&&(T(),H(s[n],1,1,(()=>{s[n]=null})),V(),a=s[l],a||(a=s[l]=c[l](t),a.c()),q(a,1),a.m(o,null))},i(t){i||(q(a),i=!0)},o(t){H(a),i=!1},d(t){t&&p(e),t&&p(n),t&&p(r),t&&p(o),s[l].d()}}}function Oe(t,e,n){let r;return c(t,lt,(t=>n(0,r=t))),[r]}return new class extends tt{constructor(t){super(),Z(this,t,Oe,Be,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
